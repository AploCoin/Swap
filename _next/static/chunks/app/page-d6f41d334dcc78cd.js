(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7595:(e,t,n)=>{Promise.resolve().then(n.bind(n,9167))},9167:(e,t,n)=>{"use strict";let a,i,r,s;n.r(t),n.d(t,{default:()=>O});var o=n(5155),l=n(2115),d=n(8808),u=n(8982),p=n(1378),c=n(1525),y=n(5237);let m=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}],h=[{inputs:[{internalType:"uint256",name:"initialMinimumLiquidity",type:"uint256"},{internalType:"uint256",name:"initialMaxSwapFee",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"uint256",name:"newMinimumLiquidity",type:"uint256"}],name:"setMinimumLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxSwapFee",type:"uint256"}],name:"setMaxSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"tokenAddress",type:"address"}],name:"addToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"},{internalType:"uint256",name:"swapFee",type:"uint256"}],name:"createPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"poolId",type:"bytes32"},{internalType:"uint256",name:"newSwapFee",type:"uint256"}],name:"setPoolSwapFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"poolId",type:"bytes32"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],name:"addLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"poolId",type:"bytes32"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],name:"removeLiquidity",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"poolId",type:"bytes32"},{internalType:"address",name:"tokenIn",type:"address"},{internalType:"uint256",name:"amountIn",type:"uint256"}],name:"swap",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"inputAmount",type:"uint256"},{internalType:"uint256",name:"inputReserve",type:"uint256"},{internalType:"uint256",name:"outputReserve",type:"uint256"},{internalType:"uint256",name:"swapFee",type:"uint256"}],name:"getSwapAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"}],name:"getPoolId",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"}],f=async()=>{if(window.ethereum)return a=new d.k(window.ethereum,"any"),await a.send("eth_requestAccounts",[]),i=await a.getSigner(),console.log("Connected with account:",s=await i.getAddress()),s;throw alert("Please install MetaMask!"),Error("MetaMask not installed")},w=e=>{if(!i)throw Error("Signer is not initialized");r=new u.NZ(e,h,i),console.log("Contract initialized at address: ".concat(e))},b=async(e,t)=>{if(!r)throw Error("Contract is not initialized");try{return await r.getPoolId(e,t)}catch(e){throw console.error("Error getting pool ID:",e),e}},g=async(e,t,n)=>{if(!i||!s)throw Error("Signer or user account is not initialized");let a=new u.NZ(e,m,i);try{let e=await a.allowance(s,n);if(p.Ab(e)<c.XS(t,18)){let e=await a.approve(n,c.XS(t,18));await e.wait(),console.log("Token approved")}else console.log("Allowance already sufficient")}catch(e){throw console.error("Approval failed:",e),e}},v=async(e,t,n,a)=>{if(!r)throw Error("Contract is not initialized");if(!y.PW(e)||!y.PW(t))throw Error("Invalid token addresses");if(0>=parseFloat(n))throw Error("Invalid amount");let i=await b(e,t);if(!i)throw Error("Pool does not exist!");console.log("Swapping tokens in pool:",i),await g(e,n,a);try{let t=await r.swap(i,e,c.XS(n,18));await t.wait(),console.log("Successfully swapped ".concat(n," of ").concat(e))}catch(e){throw console.error("Swap failed:",e),e}},x={chainId:"0x6e7a",chainName:"Aplo Network",rpcUrls:["https://pub1.aplocoin.com"],nativeCurrency:{name:"GAPLO",symbol:"GAPLO",decimals:18},blockExplorerUrls:["https://explorer.aplocoin.com"]},k=async()=>{try{if(await window.ethereum.request({method:"eth_chainId"})===x.chainId)return console.log("Already on Aplo Network"),!0;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:x.chainId}]}),console.log("Switched to Aplo Network"),!0}catch(e){if(4902===e.code)return await window.ethereum.request({method:"wallet_addEthereumChain",params:[x]}),console.log("Aplo Network added and switched"),!0;return console.error("Failed to switch network:",e),!1}}catch(e){return console.error("Error checking or switching network:",e),!1}};var T=n(2317),j=n(1027),N=n(3463),A=n(9795);function C(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,A.QP)((0,N.$)(t))}let M=(0,j.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),S=l.forwardRef((e,t)=>{let{className:n,variant:a,size:i,asChild:r=!1,...s}=e,l=r?T.DX:"button";return(0,o.jsx)(l,{className:C(M({variant:a,size:i,className:n})),ref:t,...s})});S.displayName="Button";let E=l.forwardRef((e,t)=>{let{className:n,type:a,...i}=e;return(0,o.jsx)("input",{type:a,className:C("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:t,...i})});E.displayName="Input";var F=n(6195);let I=(0,j.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),P=l.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(F.b,{ref:t,className:C(I(),n),...a})});P.displayName=F.b.displayName;var _=n(3514);let z=_.bL,q=l.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(_.B8,{ref:t,className:C("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...a})});q.displayName=_.B8.displayName;let L=l.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(_.l9,{ref:t,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...a})});L.displayName=_.l9.displayName;let R=l.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,o.jsx)(_.UC,{ref:t,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...a})});function O(){let[e,t]=(0,l.useState)(!1),[n,a]=(0,l.useState)(""),[i,r]=(0,l.useState)(""),[s,d]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),[c,y]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),b=async()=>{try{let e=await f();a(e),t(!0)}catch(e){console.error(e)}},x=()=>{if(!i){alert("Please enter a valid contract address.");return}w(i),alert("Contract initialized!")},T=async()=>{try{if(!s||!u){alert("Please fill in all fields.");return}await g(s,u,i),alert("Token approved successfully!")}catch(e){console.error("Approval failed:",e),alert("Approval failed. Check console for details.")}},j=async()=>{try{if(!await k()){alert("Please switch to Aplo Network to proceed with the swap.");return}await v(c,m,u,i),alert("Swap successful!")}catch(e){console.error("Swap failed:",e),alert("Swap failed. Check console for details.")}};return(0,o.jsx)("div",{className:"flex items-center justify-center h-screen w-screen",children:(0,o.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-lg relative w-2/5 overflow-hidden",children:[!e&&(0,o.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-10 bg-opacity-90 bg-gray-100",children:[(0,o.jsx)("img",{src:"https://metamask.io/assets/icon.svg",alt:"MetaMask Logo",className:"w-16 h-16 mb-4"}),(0,o.jsx)(S,{onClick:b,className:"mx-auto",children:"Connect MetaMask"})]}),(0,o.jsxs)(z,{defaultValue:"swap",className:"w-full",children:[(0,o.jsxs)(q,{className:"grid grid-cols-2 mb-4",children:[(0,o.jsx)(L,{value:"swap",children:"Swap Tokens"}),(0,o.jsx)(L,{value:"approve",children:"Approve Token"})]}),(0,o.jsxs)(R,{value:"approve",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(P,{htmlFor:"contractAddress",children:"Contract Address:"}),(0,o.jsx)(E,{type:"text",id:"contractAddress",value:i,onChange:e=>r(e.target.value),placeholder:"Enter Contract Address"}),(0,o.jsx)(S,{onClick:x,className:"mt-2",children:"Initialize Contract"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(P,{htmlFor:"tokenAddress",children:"Token Address:"}),(0,o.jsx)(E,{type:"text",id:"tokenAddress",value:s,onChange:e=>d(e.target.value),placeholder:"Enter Token Address"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(P,{htmlFor:"amount",children:"Amount:"}),(0,o.jsx)(E,{type:"number",id:"amount",value:u,onChange:e=>p(e.target.value),placeholder:"Enter amount"})]}),(0,o.jsx)(S,{onClick:T,className:"mt-4",children:"Approve Token"})]}),(0,o.jsxs)(R,{value:"swap",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(P,{htmlFor:"contractAddress",children:"Contract Address:"}),(0,o.jsx)(E,{type:"text",id:"contractAddress",value:i,onChange:e=>r(e.target.value),placeholder:"Enter Contract Address"}),(0,o.jsx)(S,{onClick:x,className:"mt-2",children:"Initialize Contract"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(P,{htmlFor:"token0",children:"Token Address:"}),(0,o.jsx)(E,{type:"text",id:"token0",value:c,onChange:e=>y(e.target.value),placeholder:"Enter Token 0 Address"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(P,{htmlFor:"token1",children:"To token Address:"}),(0,o.jsx)(E,{type:"text",id:"token1",value:m,onChange:e=>h(e.target.value),placeholder:"Enter Token 1 Address"})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)(P,{htmlFor:"amount",children:"Amount to Swap:"}),(0,o.jsx)(E,{type:"number",id:"amount",value:u,onChange:e=>p(e.target.value),placeholder:"Enter Amount"})]}),(0,o.jsx)(S,{onClick:j,className:"mt-4",children:"Swap Tokens"})]})]})]})})}R.displayName=_.UC.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[768,441,517,358],()=>t(7595)),_N_E=e.O()}]);